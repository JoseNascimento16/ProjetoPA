Queremos restringir o acesso às paginas do site para, somente usuarios autorizados.

Para isso vamos usar o @login required. Para usar este decorator, temos que importa-lo na views.py que quisermos.

	from django.contrib.auth.decorators import login_required

Depois basta coloca-lo antes de qualquer função nas views.py que quisermos restringir o acesso (no nosso caso, quase todas elas).

Ex:

@login_required
def planos_de_acao(request):
    return render(request, 'index.html')

E por ultimo temos que definir uma página para que o usuario não-autorizado seja redirecionado (de preferencia a pagina de login).
definimos isso no arquivo settings.py.

Em SetupPrincipal > settings.py

LOGIN_URL = '/index/'

PRONTO!

### Existem outras formas de restringir o acesso, abaixo temos mais uma, esta forma cria um IF na views que busca se o usuario está autenticado, senão redireciona. Eu seja, faz a mesma coisa.

Ex:

def dashboard(request):
    if request.user.is_authenticated:
        return render(request, 'dashboard.html')
    else:
        print('Você está deslogado, faça o login novamente')
        return redirect('fazendo_logout')